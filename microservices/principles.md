# Домашнее задание к занятию "Микросервисы: принципы"

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры. Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации

## Задача 1: API Gateway

Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:
- маршрутизация запросов к нужному сервису на основе конфигурации,
- возможность проверки аутентификационной информации в запросах,
- обеспечение терминации HTTPS.

Обоснуйте свой выбор.

#### Решение

| Решение         | Маршрутизация | Аутентификация | Терминация HTTPS | Платно?                             |
| --------------- | ------------- | -------------- | ---------------- | ----------------------------------- |
| Kong            | +             | +              | +                | Бесплатно                           |
| Tyk             | +             | +              | +                | Бесплатно                           |
| KrakenD         | +             | +              | +                | Бесплатно, есть коммерческая версия |
| Express Gateway | +             | +              | +                | Бесплатно                           |
| Yandex Gateway  | +             | +              | +                | Платно                              |
| Azure Gateway   | +             | +              | +                | Платно                              |
| NGINX           | +             | +              | +                | Бесплатно                           |

По заявленным требованиям подходит почти любой из перечисленных.
Для небольшого проекта можно взять облачные Gateway, для self-hosted можно взять tyk или kong.

## Задача 2: Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:
- поддержка кластеризации для обеспечения надёжности,
- хранение сообщений на диске в процессе доставки,
- высокая скорость работы,
- поддержка различных форматов сообщений,
- разделение прав доступа к различным потокам сообщений,
- простота эксплуатации.

Обоснуйте свой выбор.

#### Решение

| Характеристика \ Брокер                               | Kafka | RabbitMQ | ActiveMQ |
| ----------------------------------------------------- | ----- | -------- | -------- |
| Поддержка кластеризации для обеспечения надежности    | +     | +        | +        |
| Хранение сообщений на диске в процессе доставки       | +     | +        | +        |
| Высокая скорость работы                               | +     | +        | -        |
| Поддержка различных форматов сообщений                | +     | +        | -        |
| Разделение прав доступа к различным потокам сообщений | +     | +        | +        |
| Простота эксплуатации                                 | +     | +        | +        |

Я бы выбирал между Kafka или RabbitMQ. Если требуется обрабатывать большой объем данных и длительно их сохранять в очередях - то кафка, если сообщения меньше и требований по хранению нет - то RabbitMQ.
